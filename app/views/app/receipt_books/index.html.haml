
.header
  .container-fluid
    .header-body
      .row.align-items-end
        .col
          %h1.header-title
            Receipt Books
        .col-auto
          = link_to 'New Book', new_receipt_book_path, class: "btn btn-outline-primary"  
.container-fluid
  .row
    .col
      .card
        .card-body
          = render "search", q: @q
  .row.justify-content-md-center
    .col-12
      .card
        .card-body
          %table.table.table-sm
            - if @receipt_books.any?  
              %thead
                %tr
                  %th{scope: "col"} Book Number
                  %th{scope: "col"} Staff Name
                  %th{scope: "col"} Issue Date
                  %th{scope: "col"} From
                  %th{scope: "col"} To
                  %th{scope: "col"} Total Pages
                  %th{scope: "col"} Blank Pages
                  %th{scope: "col"} Collection
                  %th{scope: "col"} Status
                  %th{scope: "col"} Action
              %tbody
                - @receipt_books.each.with_index(1) do |book, index|
                  %tr
                    %td= book.book_number
                    %td= book.staff.full_name
                    %td= book.issue_date
                    %td= book.from
                    %td= book.to
                    %td= book.total_pages
                    %td= book.receipt_book_pages.select {|c| c.amount.nil?}.count
                    %td= book.receipt_book_pages.sum(:amount)
                    %td= book.status
                    %td.text-right
                      = link_to 'Edit', edit_receipt_book_path(book), class: "btn btn-outline-info btn-sm"
            - else
              = render 'shared/no_data'

    = paginate @receipt_books              
